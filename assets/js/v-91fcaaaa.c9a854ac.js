"use strict";(self.webpackChunkstudy_note=self.webpackChunkstudy_note||[]).push([[666],{6165:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-91fcaaaa",path:"/nuxtJs/introduction/",title:"服务端渲染和单页应用",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"渲染一个vue实例",slug:"渲染一个vue实例",children:[]},{level:2,title:"与服务器集成",slug:"与服务器集成",children:[]},{level:2,title:"客户端动态标签",slug:"客户端动态标签",children:[]},{level:2,title:"使用webpack的源码构建",slug:"使用webpack的源码构建",children:[]},{level:2,title:"构建配置",slug:"构建配置",children:[{level:3,title:"安装依赖",slug:"安装依赖",children:[]}]}],filePathRelative:"nuxtJs/introduction/readme.md",git:{updatedTime:1635173344e3}}},6608:(n,s,a)=>{a.r(s),a.d(s,{default:()=>Q});var e=a(6252),t=a(8706);const l=(0,e._)("h1",{id:"服务端渲染和单页应用",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#服务端渲染和单页应用","aria-hidden":"true"},"#"),(0,e.Uk)(" 服务端渲染和单页应用")],-1),p=(0,e._)("p",null,"服务端渲染有早先的php，jsp等，都是后端通过模板语言直接渲染页面，好处是一次页面请求就能拿到所有数据， 展现速度块。",-1),o=(0,e._)("p",null,"单页应用，如vue、react等框架，解决了复杂场景下，前端的代码效率问题，降低了频繁操作dom的复杂度。但是因为要请求数据和js，渲染速度慢，且无法seo",-1),c=(0,e._)("p",null,[(0,e._)("strong",null,"同构渲染")],-1),r=(0,e._)("p",null,"基于React、Vue等框架，客户端渲染和服务端渲染的结合",-1),u=(0,e._)("ul",null,[(0,e._)("li",null,"在服务器端执行一次，用于实现服务器渲染（首屏直出）"),(0,e._)("li",null,"在客户端再执行一次，用于接管页面交互"),(0,e._)("li",null,"核心解决seo和首屏渲染慢的问题"),(0,e._)("li",null,"拥有传统服务端渲染的优点，也有客户端渲染的优点")],-1),_=(0,e._)("p",null,"同构渲染的问题",-1),k=(0,e._)("ol",null,[(0,e._)("li",null,"开发条件有限"),(0,e._)("li",null,"更多服务端资源")],-1),i=(0,e._)("h1",{id:"vue-ssr",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#vue-ssr","aria-hidden":"true"},"#"),(0,e.Uk)(" vue ssr")],-1),b=(0,e._)("p",null,[(0,e.Uk)("vue SSR是vue官方提供的一个服务端渲染解决方案。在学习中使用官方方案，帮助我们了解底层。对于使用"),(0,e._)("code",null,"nuxtjs"),(0,e.Uk)("这种开发框架有帮助")],-1),U=(0,e._)("h1",{id:"vuessr的基本使用",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#vuessr的基本使用","aria-hidden":"true"},"#"),(0,e.Uk)(" VueSSR的基本使用")],-1),m=(0,e._)("h2",{id:"渲染一个vue实例",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#渲染一个vue实例","aria-hidden":"true"},"#"),(0,e.Uk)(" 渲染一个vue实例")],-1),d=(0,e._)("p",null,"基于官方的第一个示例，我们动手操作一下",-1),g=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token comment"},"// 1. 引入库"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" Vue "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"require"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'vue'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" renderer "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"require"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'vue-server-renderer'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"createRenderer"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token comment"},"// 创建实例"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" app "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"new"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"Vue"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  data"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    message"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'拉钩教育'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  template"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token string"},'\n    <div id="app">\n      <h1>{{message}}</h1>\n    </div>\n  '),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token comment"},"// 将vue实例渲染位html"),(0,e.Uk)("\nrenderer"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"renderToString"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("app"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e.Uk)("err"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" html")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("err"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"throw"),(0,e.Uk)(" err\n  console"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"log"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("html"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token comment"},"// 使用node执行我们可以得到一个字符串，并且含有一个属性"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("div id"),(0,e._)("span",{class:"token operator"},"="),(0,e._)("span",{class:"token string"},'"app"'),(0,e.Uk)(" data"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("server"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("rendered"),(0,e._)("span",{class:"token operator"},"="),(0,e._)("span",{class:"token string"},'"true"'),(0,e._)("span",{class:"token operator"},">"),(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("h1"),(0,e._)("span",{class:"token operator"},">"),(0,e.Uk)("拉钩教育"),(0,e._)("span",{class:"token operator"},"<"),(0,e._)("span",{class:"token operator"},"/"),(0,e.Uk)("h1"),(0,e._)("span",{class:"token operator"},">"),(0,e._)("span",{class:"token operator"},"<"),(0,e._)("span",{class:"token operator"},"/"),(0,e.Uk)("div"),(0,e._)("span",{class:"token operator"},">"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br")])],-1),v=(0,e._)("h2",{id:"与服务器集成",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#与服务器集成","aria-hidden":"true"},"#"),(0,e.Uk)(" 与服务器集成")],-1),h=(0,e._)("p",null,[(0,e._)("code",null,"createRenderer"),(0,e.Uk)("支持传入一个"),(0,e._)("code",null,"options"),(0,e.Uk)("参数，里面可以传入一个模板")],-1),f=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" renderer "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"require"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'vue-server-renderer'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"createRenderer"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  template"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"require"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'fs'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"readFileSync"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'./index.template.html'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'utf-8'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br")])],-1),w=(0,e._)("p",null,[(0,e._)("code",null,"renderToString"),(0,e.Uk)("可以传入三个参数，vue实例、content对象、回调函数")],-1),y=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e.Uk)("renderer"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"renderToString"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("\n    app"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      title"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'拉钩教育'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      meta"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'\'<meta name="description" content="拉钩教育" />\''),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e.Uk)("err"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" html")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("err"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(" res"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"status"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token number"},"500"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"end"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'服务器出错'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 设置请求头"),(0,e.Uk)("\n      res"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"end"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("html"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br")])],-1),x=(0,e._)("p",null,[(0,e.Uk)("所以整体的"),(0,e._)("code",null,"vue"),(0,e.Uk)("、"),(0,e._)("code",null,"vue-server-renderer"),(0,e.Uk)("和"),(0,e._)("code",null,"express"),(0,e.Uk)("组合就能完成最基本的"),(0,e._)("code",null,"node"),(0,e.Uk)("读取模板， "),(0,e._)("code",null,"renderer"),(0,e.Uk)("渲染模板，并通过"),(0,e._)("code",null,"express"),(0,e.Uk)("返回到客户端页面上，整体最简单的一个服务端渲染为")],-1),j=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" Vue "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"require"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'vue'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" express "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"require"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'express'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" fs "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"require"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'fs'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" renderer "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"require"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'vue-server-renderer'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"createRenderer"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  template"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" fs"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"readFileSync"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'./index.template.html'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'utf-8'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" server "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"express"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\nserver"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"get"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'/'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e.Uk)("req"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" res")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" app "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"new"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"Vue"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    data"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      message"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'拉钩教育'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    template"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token string"},'\n    <div id="app">\n      <h1>{{message}}</h1>\n    </div>\n  '),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  renderer"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"renderToString"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("\n    app"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      title"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'拉钩教育'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      meta"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'\'<meta name="description" content="拉钩教育" />\''),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e.Uk)("err"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" html")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("err"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(" res"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"status"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token number"},"500"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"end"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'服务器出错'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 设置请求头"),(0,e.Uk)("\n      res"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"end"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("html"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\nserver"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"listen"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token number"},"3000"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  console"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"log"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'server running at 3000'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"30"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"31"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"32"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"33"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"34"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"35"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"36"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"37"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"38"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"39"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"40"),(0,e._)("br")])],-1),S=(0,e._)("h2",{id:"客户端动态标签",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#客户端动态标签","aria-hidden":"true"},"#"),(0,e.Uk)(" 客户端动态标签")],-1),V=(0,e._)("p",null,[(0,e.Uk)("在完成了基础的渲染之后，我们来看看如何实现动态标签的渲染，在代码中添加"),(0,e._)("code",null,"@click"),(0,e.Uk)("和"),(0,e._)("code",null,"v-model")],-1),A=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" app "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"new"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"Vue"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n data"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n   message"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'拉钩教育'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n template"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token string"},'\n <div id="app">\n   <h1>{{message}}</h1>\n   <h2>客户端动态标签</h2>\n   <div>\n     <input type="text" v-model=\'message\' />\n   </div>\n   <button @click="onClick">点击测试</button>\n </div>\n'),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n data"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n   message"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'拉钩教育'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n methods"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n   "),(0,e._)("span",{class:"token function"},"onClick"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n     console"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"log"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'hello ssr'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n   "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br")])],-1),q=(0,e._)("p",null,[(0,e.Uk)("在浏览器中执行发现，渲染是可以的，但是vue的双向绑定和"),(0,e._)("code",null,"v-on"),(0,e.Uk)("并没有实现，查看网络中的返回就能发现， "),(0,e._)("code",null,"express"),(0,e.Uk)("将数据作为字符串返回了，但是代码中没有客户端的js，所以不能实现动态功能。需要一个客户端的入口文件， 将服务端渲染好的页面激活成动态的客户端Vue页面")],-1),R=(0,e._)("p",null,[(0,e._)("img",{src:t,alt:"构建过程"})],-1),C=(0,e._)("h2",{id:"使用webpack的源码构建",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#使用webpack的源码构建","aria-hidden":"true"},"#"),(0,e.Uk)(" 使用webpack的源码构建")],-1),T=(0,e._)("p",null,[(0,e.Uk)("通过"),(0,e._)("code",null,"webpack"),(0,e.Uk)("我们将需要的代码打包进客户端和服务端，项目的基本结构如下")],-1),B=(0,e._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,e._)("pre",{class:"language-text"},[(0,e._)("code",null,"src\n├── components\n│   ├── Foo.vue\n│   ├── Bar.vue\n│   └── Baz.vue\n├── App.vue\n├── app.js # 通用 entry(universal entry)\n├── entry-client.js # 仅运行于浏览器\n└── entry-server.js # 仅运行于服务器\n")]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br")])],-1),F=(0,e._)("p",null,[(0,e._)("code",null,"app.js"),(0,e.Uk)("使我们应用程序的通用"),(0,e._)("code",null,"entry"),(0,e.Uk)("，在纯客户端中，我们将此文件创建根实例并挂载到dom。但是对于ssr我们需要 导出一个"),(0,e._)("code",null,"createapp"),(0,e.Uk)("作为实例来给客户端和服务端入口使用")],-1),N=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(" Vue "),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'vue'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(" App "),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'./App.vue'"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// 导出一个工厂函数，用于创建新的"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token comment"},"// 应用程序、router 和 store 实例"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"function"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"createApp"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" app "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"new"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"Vue"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 根实例简单的渲染应用程序组件。"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function-variable function"},"render"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token parameter"},"h"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"h"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("App"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" app "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br")])],-1),z=(0,e._)("p",null,[(0,e._)("code",null,"entry-client.js"),(0,e.Uk)("客户端只要挂载到dom")],-1),D=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" createApp "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'./app'"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// 客户端特定引导逻辑……"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" app "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"createApp"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},'// 这里假定 App.vue 模板中根元素具有 `id="app"`'),(0,e.Uk)("\napp"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"$mount"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'#app'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br")])],-1),J=(0,e._)("p",null,[(0,e._)("code",null,"entry-server.js"),(0,e.Uk)("服务端导出的vue，在这里我们要处理数据和路由，但是现在只需要先导出")],-1),Z=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" createApp "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'./app'"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token parameter"},"context"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" app "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"createApp"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(" app\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br")])],-1),H=(0,e._)("p",null,[(0,e._)("strong",null,[(0,e.Uk)("注意在vue模板文件"),(0,e._)("code",null,"app.vue"),(0,e.Uk)("中，跟标签需要添加"),(0,e._)("code",null,"id=app"),(0,e.Uk)("，这个是用来在客户端挂载dom的")])],-1),P=(0,e._)("h2",{id:"构建配置",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#构建配置","aria-hidden":"true"},"#"),(0,e.Uk)(" 构建配置")],-1),Y=(0,e._)("h3",{id:"安装依赖",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#安装依赖","aria-hidden":"true"},"#"),(0,e.Uk)(" 安装依赖")],-1),$=(0,e._)("ul",null,[(0,e._)("li",null,"安装生产依赖")],-1),E=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e.Uk)("npm i vue vue"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("server"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("renderer express cross"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("env\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br")])],-1),G=(0,e._)("table",null,[(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",null,"包"),(0,e._)("th",null,"说明")])]),(0,e._)("tbody",null,[(0,e._)("tr",null,[(0,e._)("td",null,"vue"),(0,e._)("td",null,"Vue.js核心库")]),(0,e._)("tr",null,[(0,e._)("td",null,"vue-server-renderer"),(0,e._)("td",null,"Vue服务端渲染工具")]),(0,e._)("tr",null,[(0,e._)("td",null,"express"),(0,e._)("td",null,"基于Node的web服务框架")]),(0,e._)("tr",null,[(0,e._)("td",null,"cross-env"),(0,e._)("td",null,"通过npm script 设置跨平台的环境变量")])])],-1),I=(0,e._)("ul",null,[(0,e._)("li",null,"安装开发依赖")],-1),K=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e.Uk)("npm i "),(0,e._)("span",{class:"token operator"},"-"),(0,e._)("span",{class:"token constant"},"D"),(0,e.Uk)(" webpack webpack"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("cli webpack"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("merge webpack"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("node"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("externals @babel"),(0,e._)("span",{class:"token operator"},"/"),(0,e.Uk)("core\n@babel"),(0,e._)("span",{class:"token operator"},"/"),(0,e.Uk)("plugin"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("transform"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("runtime @babel"),(0,e._)("span",{class:"token operator"},"/"),(0,e.Uk)("preset"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("env babel"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("loader css"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("loader \nurl"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("loader file"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("loader rimraf vue"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("loader vue"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("template"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("compiler friendly"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("errors"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("webpack"),(0,e._)("span",{class:"token operator"},"-"),(0,e.Uk)("plugin\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br")])],-1),L=(0,e._)("table",null,[(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",null,"包"),(0,e._)("th",null,"说明")])]),(0,e._)("tbody",null,[(0,e._)("tr",null,[(0,e._)("td",null,"webpack-merge"),(0,e._)("td",null,"webpack 配置信息合并工具")]),(0,e._)("tr",null,[(0,e._)("td",null,"webpack-cli"),(0,e._)("td",null,"webpack 的命令行工具")]),(0,e._)("tr",null,[(0,e._)("td",null,"webpack4"),(0,e._)("td",null,"webpack 核心包")]),(0,e._)("tr",null,[(0,e._)("td",null,"vue-template-compiler vue-loader"),(0,e._)("td",null,"处理 .vue 资源")]),(0,e._)("tr",null,[(0,e._)("td",null,"rimraf"),(0,e._)("td",null,"基于 Node 封装的一个跨平台 rm -rf 工具")]),(0,e._)("tr",null,[(0,e._)("td",null,"friendly-errors-webpack-plugin"),(0,e._)("td",null,"友好的 webpack 错误提示")]),(0,e._)("tr",null,[(0,e._)("td",null,"file-loader"),(0,e._)("td",null,"处理字体资源 在webpack4中需要")]),(0,e._)("tr",null,[(0,e._)("td",null,"url-loader"),(0,e._)("td",null,"处理图片资源 在webpack4中需要")]),(0,e._)("tr",null,[(0,e._)("td",null,"css-loader"),(0,e._)("td",null,"处理 CSS 资源")]),(0,e._)("tr",null,[(0,e._)("td",null,"babel-loader @babel/preset-env @babel/plugin-transform-runtime @babel/core"),(0,e._)("td",null,"Babel 相关工具")])])],-1),M=(0,e._)("p",null,[(0,e._)("strong",null,"因为升级到了webpack5，上面的字体和css相关处理在webpack5中已经内置，friendly-errors-webpack-plugin不支持webpack5")],-1),O={},Q=(0,a(3744).Z)(O,[["render",function(n,s){return(0,e.wg)(),(0,e.iD)(e.HY,null,[l,p,o,c,r,u,_,k,i,b,U,m,d,g,v,h,f,w,y,x,j,S,V,A,q,R,C,T,B,F,N,z,D,J,Z,H,P,Y,$,E,G,I,K,L,M],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{for(const[a,e]of s)n[a]=e;return n}},8706:(n,s,a)=>{n.exports=a.p+"assets/img/1.94e8c534.png"}}]);