"use strict";(self.webpackChunkstudy_note=self.webpackChunkstudy_note||[]).push([[622],{8934:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-6f8c9939",path:"/react/tinyReact/",title:"TinyReact",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"创建 virtualDOM",slug:"创建-virtualdom",children:[]},{level:2,title:"将 vDOM 转换成 真实 DOM",slug:"将-vdom-转换成-真实-dom",children:[{level:3,title:"给元素节点添加属性",slug:"给元素节点添加属性",children:[]}]},{level:2,title:"渲染组件",slug:"渲染组件",children:[{level:3,title:"函数组件",slug:"函数组件",children:[]},{level:3,title:"渲染类组件",slug:"渲染类组件",children:[]}]},{level:2,title:"VDOM 对比更新",slug:"vdom-对比更新",children:[{level:3,title:"vdom 是相同类型",slug:"vdom-是相同类型",children:[]},{level:3,title:"vdom是不同类型",slug:"vdom是不同类型",children:[]},{level:3,title:"删除节点",slug:"删除节点",children:[]},{level:3,title:"类组件状态更新",slug:"类组件状态更新",children:[]},{level:3,title:"组件更新",slug:"组件更新",children:[]}]},{level:2,title:"ref 属性",slug:"ref-属性",children:[]},{level:2,title:"key 属性",slug:"key-属性",children:[{level:3,title:"key 属性节点对比",slug:"key-属性节点对比",children:[]},{level:3,title:"节点卸载",slug:"节点卸载",children:[]}]}],filePathRelative:"react/tinyReact/readme.md",git:{updatedTime:163699249e4}}},6339:(n,s,a)=>{a.r(s),a.d(s,{default:()=>Ts});var t=a(6252),e=a(2993),o=a(4643),p=a(5647);const c=(0,t._)("h1",{id:"tinyreact",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#tinyreact","aria-hidden":"true"},"#"),(0,t.Uk)(" TinyReact")],-1),l=(0,t.Uk)("从创建一个微小的 react 来了解"),k=(0,t._)("code",null,"virtualDOM",-1),u=(0,t.Uk)("的的渲染流程。所有的代码可以在 "),_={href:"https://github.com/idenet/tiny-react",target:"_blank",rel:"noopener noreferrer"},r=(0,t.Uk)("这里"),i=(0,t.Uk)("可以看到，"),U=(0,t._)("code",null,"master",-1),m=(0,t.Uk)("是所有实现，"),b=(0,t._)("code",null,"init",-1),d=(0,t.Uk)("是未实现的"),v=(0,t._)("code",null,"tempalte",-1),f=(0,t._)("p",null,[(0,t._)("strong",null,"注意"),(0,t.Uk)(" 在"),(0,t._)("code",null,"babelrc"),(0,t.Uk)("中有一段代码，将"),(0,t._)("code",null,"react"),(0,t.Uk)("预置转换成了我们需要的"),(0,t._)("code",null,"TinyReact")],-1),y=(0,t._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,t._)("pre",{class:"language-text"},[(0,t._)("code",null,'[\n  "@babel/preset-react",\n   {\n      "pragma": "TinyReact.createElement"\n   }\n]\n')]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br")])],-1),w=(0,t._)("p",null,[(0,t.Uk)("这样我们就能拿到"),(0,t._)("code",null,"react"),(0,t.Uk)("转换后的js代码，到我们自己的"),(0,t._)("code",null,"TinyReact")],-1),g=(0,t._)("h2",{id:"创建-virtualdom",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#创建-virtualdom","aria-hidden":"true"},"#"),(0,t.Uk)(" 创建 virtualDOM")],-1),h=(0,t._)("p",null,"在 TinyReact 文件夹中创建",-1),M=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// createElement.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token doc-comment comment"},[(0,t.Uk)("/**\n * 创建 Virtual DOM\n * "),(0,t._)("span",{class:"token keyword"},"@param"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("string"),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t.Uk)(),(0,t._)("span",{class:"token parameter"},"type"),(0,t.Uk)(" 类型\n * "),(0,t._)("span",{class:"token keyword"},"@param"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("object "),(0,t._)("span",{class:"token operator"},"|"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t.Uk)(),(0,t._)("span",{class:"token parameter"},"props"),(0,t.Uk)(" 属性\n * "),(0,t._)("span",{class:"token keyword"},"@param"),(0,t.Uk)("  "),(0,t._)("span",{class:"token class-name"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("createElement"),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t.Uk)(),(0,t._)("span",{class:"token parameter"},"children"),(0,t.Uk)(" 子元素\n * "),(0,t._)("span",{class:"token keyword"},"@return"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("object"),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t.Uk)(" Virtual DOM\n */")]),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"createElement"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("children")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n\t"),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    type"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    children\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" \n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br")])],-1),D=(0,t._)("p",null,"在出口中导出 createElment.js",-1),O=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// index.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" createElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./createElement'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  createElement"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br")])],-1),A=(0,t._)("p",null,[(0,t.Uk)("在入口 "),(0,t._)("code",null,"index.js"),(0,t.Uk)("中使用代码")],-1),j=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" TinyReact "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./TinyReact'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" virtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div className"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token string"},'"container"'),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h1"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("你好 Tiny React"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h1"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h2"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("编码必杀技"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h2"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n      嵌套"),(0,t._)("span",{class:"token number"},"1"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("嵌套 "),(0,t._)("span",{class:"token number"},"1.1"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h3"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("观察"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" 这个将会被改变"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h3"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token number"},"2"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("如果"),(0,t._)("span",{class:"token number"},"2"),(0,t.Uk)("和"),(0,t._)("span",{class:"token number"},"1"),(0,t.Uk)("相等渲染当前内容"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token number"},"2"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"2"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("span"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("这是一段内容"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("span"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"alert"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'你好'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("点击我"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h3"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("这个将会被删除"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h3"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"3"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"TinyReact"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" root"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br")])],-1),E=(0,t._)("p",null,[(0,t.Uk)("这里就拿到了"),(0,t._)("code",null,"react"),(0,t.Uk)("创建的"),(0,t._)("code",null,"virtaulDOM"),(0,t.Uk)("对象，但是通过以上代码我们发现 VDOM 存在一些问题， 第一个问题是文本节点北直街放到了数组中，第二个问题是排除布尔值和null的节点, 第三点props可以拿到children")],-1),C=(0,t._)("p",null,[(0,t._)("img",{src:e,alt:"问题1"})],-1),x=(0,t._)("p",null,"但是我们希望文本节点也是放在对象中的，所以我们需要对 createElement 进行改造",-1),N=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"createElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("children")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 由于 map 方法无法从数据中刨除元素, 所以此处将 map 方法更改为 reduce 方法"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" childElements "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"concat"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"reduce"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("result"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" child")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n     "),(0,t._)("span",{class:"token comment"},"// 判断子元素类型 刨除 null true false"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("child "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" child "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" child "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 判断 child 是否是对象类型"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("child "),(0,t._)("span",{class:"token keyword"},"instanceof"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Object"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        result"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"push"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        result"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"push"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"createElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'text'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" textContent"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" child "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 将需要保留的 Virtual DOM 放入 result 数组"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" result\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    type"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"assign"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" childElements "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" childElements"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br")])],-1),V=(0,t._)("h2",{id:"将-vdom-转换成-真实-dom",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#将-vdom-转换成-真实-dom","aria-hidden":"true"},"#"),(0,t.Uk)(" 将 vDOM 转换成 真实 DOM")],-1),z=(0,t._)("p",null,"导出一个 render 函数，用来实现真实 dom",-1),Z=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" createElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./createElement'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" render "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./render'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  createElement"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  render"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br")])],-1),P=(0,t._)("p",null,"入口代码更改",-1),Q=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" TinyReact "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./TinyReact'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" root "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getElementById"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'root'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" virtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div className"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token string"},'"container"'),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h1"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("你好 Tiny React"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h1"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h2"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("编码必杀技"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h2"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n      嵌套"),(0,t._)("span",{class:"token number"},"1"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("嵌套 "),(0,t._)("span",{class:"token number"},"1.1"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h3"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("观察"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" 这个将会被改变"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h3"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token number"},"2"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("如果"),(0,t._)("span",{class:"token number"},"2"),(0,t.Uk)("和"),(0,t._)("span",{class:"token number"},"1"),(0,t.Uk)("相等渲染当前内容"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token number"},"2"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"2"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("span"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("这是一段内容"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("span"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"alert"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'你好'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("点击我"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h3"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("这个将会被删除"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h3"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"3"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\nTinyReact"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" root"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// react渲染完成后的vdom 类似"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"div"'),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" className"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"container"'),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"h3"'),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"text"'),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            textContent"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"Hello React"'),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"p"'),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"text"'),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            textContent"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"React is great"'),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"33"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"34"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"35"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"36"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"37"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"38"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"39"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"40"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"41"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"42"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"43"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"44"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"45"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"46"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"47"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"48"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"49"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"50"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"51"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"52"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"53"),(0,t._)("br")])],-1),I=(0,t._)("p",null,"render 函数的实现。他接收 VDOM，根节点，oldDOM(用于之后的比对)",-1),B=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// render.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 在 diff 方法内部判断是否需要对比 对比也好 不对比也好 都在 diff 方法中进行操作  "),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br")])],-1),S=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// diff.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" mountElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"./mountElement"'),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 判断 oldDOM 是否存在"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 如果不存在 不需要对比 直接将 Virtual DOM 转换为真实 DOM"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br")])],-1),T=(0,t._)("p",null,"这里我们还要处理他是否是vDOM，还是组件，所以我们还需要一个函数来判断",-1),R=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountElement.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" mountNativeElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"./mountNativeElement"'),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 通过调用 mountNativeElement 方法转换 Native Element"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"mountNativeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br")])],-1),K=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountNativeElement.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" createDOMElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"./createDOMElement"'),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountNativeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" newElement "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"createDOMElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  container"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"appendChild"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newElement"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br")])],-1),W=(0,t._)("p",null,"在我们创建完节点之后，其实他的属性并没有添加到节点之上，我们需要一个函数来将属性，value等添加到上面",-1),F=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// createDOMElement.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" mountElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"./mountElement"'),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" updateNodeElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"./updateNodeElement"'),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"createDOMElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" newElement "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"text"'),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 创建文本节点"),(0,t.Uk)("\n    newElement "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"createTextNode"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("textContent"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 创建元素节点"),(0,t.Uk)("\n    newElement "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"createElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 更新元素属性"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"updateNodeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newElement"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 递归渲染子节点"),(0,t.Uk)("\n  virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"child"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 因为不确定子元素是 NativeElement 还是 Component 所以调用 mountElement 方法进行确定"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" newElement"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" newElement\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br")])],-1),G=(0,t._)("h3",{id:"给元素节点添加属性",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#给元素节点添加属性","aria-hidden":"true"},"#"),(0,t.Uk)(" 给元素节点添加属性")],-1),X=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// updateNodeElement.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"updateNodeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("newElment"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" virtualDOM")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 获取节点对应的属性对象"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" newProps "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props\n  Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"keys"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"propName"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" newPropsValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" newProps"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 判断属性是否是事件属性 onClick -> click"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'on'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 事件名称"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" eventName "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toLocaleLowerCase"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 为元素添加事件"),(0,t.Uk)("\n      newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"addEventListener"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("eventName"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" newPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 如果属性名称是 value 或者 checked 需要通过 [] 的形式添加"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'value'"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(" propName "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'checked'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      newElment"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" newPropsValue\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'children'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token comment"},"// className 属性单独处理 不直接在元素上添加 class 属性是因为 class 是 JavaScript 中的关键字"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'className'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"setAttribute"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'class'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" newPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// 设置普通属性"),(0,t.Uk)("\n        newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"setAttribute"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" newPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br")])],-1),J=(0,t._)("h2",{id:"渲染组件",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#渲染组件","aria-hidden":"true"},"#"),(0,t.Uk)(" 渲染组件")],-1),q=(0,t._)("h3",{id:"函数组件",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#函数组件","aria-hidden":"true"},"#"),(0,t.Uk)(" 函数组件")],-1),H=(0,t._)("p",null,"替换入口渲染位函数组件",-1),L=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"Demo"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("hello"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token function-variable function"},"Heart"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("Demo"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("Demo"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n\nTinyReact"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("Heart"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("Heart"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" root"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// 组件的 Virtual DOM"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" f "),(0,t._)("span",{class:"token keyword"},"function"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br")])],-1),Y=(0,t._)("p",null,"在渲染组件时，要先将 Component 与 Native Element 区分开，如果是 Native Element 可以直接开始渲染，如果是组件，特别处理。",-1),$=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" mountNativeElment "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./mountNativeElement'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" isFunction "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./isFunction'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" mountComponent "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./mountComponent'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 无论是类组件还是函数组件 其实本质上都是函数 "),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 如果 Virtual DOM 的 type 属性值为函数 就说明当前这个 Virtual DOM 为组件"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"isFunction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// Component"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// Component vs MativeElment"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountNativeElment"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// Virtual DOM 是否为函数类型"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"isFunction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" virtualDOM "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"typeof"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'function'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"highlight-lines"},[(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br")]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br")])],-1),nn=(0,t._)("p",null,"在 mountComponent 方法中再进行函数组件和类型的区分，然后再分别进行处理。",-1),sn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountComponent.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" mountNativeElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"./mountNativeElement"'),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 存放组件调用后返回的 vdom 的容器"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 区分函数型组件和类组件"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"isFunctionalComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 函数组件 调用 buildFunctionalComponent 方法处理函数组件"),(0,t.Uk)("\n    nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"buildFunctionalComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"//TODO 类组件"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 判断得到的 vdom 是否是组件"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"isFunction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 如果是组件 继续调用 mountComponent 解剖组件"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 如果是 Navtive Element 就去渲染"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountNativeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// vdom 是否为函数型组件"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 条件有两个: 1. vdom 的 type 属性值为函数 2. 函数的原型对象中不能有render方法"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 只有类组件的原型对象中有render方法 "),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"isFunctionalComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" type "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n    type "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"isFunction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"!"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("prototype "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" type"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("prototype"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("render"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// 函数组件处理 "),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"buildFunctionalComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 通过 vdom 中的 type 属性获取到组件函数并调用"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 调用组件函数时将 vdom 对象中的 props 属性传递给组件函数 这样在组件中就可以通过 props 属性获取数据了"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 组件返回要渲染的 vdom"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" virtualDOM "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"type"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"33"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"34"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"35"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"36"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"37"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"38"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"39"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"40"),(0,t._)("br")])],-1),an=(0,t._)("p",null,[(0,t.Uk)("这样函数组件就处理完成了。这里注意如果函数组件中有函数组件，他的先后调用顺序是什么? 我们注意这段代码，在正常的走到渲染真实dom的时候，我们会递归调用 children ，在这里，调用了 "),(0,t._)("code",null,"mountElement"),(0,t.Uk)(", 在"),(0,t._)("code",null,"mountElement"),(0,t.Uk)("中，继续判断了"),(0,t._)("code",null,"Vdom"),(0,t.Uk)("是组件还是虚拟dom")],-1),tn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// 递归渲染子节点"),(0,t.Uk)("\nvirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"child"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 因为不确定子元素是 NativeElement 还是 Component 所以调用 mountElement 方法进行确定"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"mountElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" newElement"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br")])],-1),en=(0,t._)("h3",{id:"渲染类组件",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#渲染类组件","aria-hidden":"true"},"#"),(0,t.Uk)(" 渲染类组件")],-1),on=(0,t._)("p",null,"类组件本身也是VDOM，可以通过 VDOM中的type来确定当前是类组件还是函数组件 在确定是类组件后，通过实例化组件调用组件中的render方法，获取需要渲染的VOM。 类组件继承自 Component 父类，子类通过super方法将自身的props属性传递给父类，父类将props属性挂载为父类属性，这样子类也具有了 props属性。这么做的好处是，当props发生更新后，父类可以根据更新后的props帮助子类更新视图",-1),pn=(0,t._)("p",null,"假设以下代码就是我们要渲染的类组件：",-1),cn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Alert"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t.Uk)("TinyReact"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"constructor"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 将 props 传递给父类 子类继承父类的 props 子类自然就有 props 数据了"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 否则 props 仅仅是 constructor 函数的参数而已"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 将 props 传递给父类的好处是 当 props 发生更改时 父类可以帮助更新 props 更新组件视图"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"super"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("message"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\nTinyReact"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("Alert message"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token string"},'"Hello React"'),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"/"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" root"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br")])],-1),ln=(0,t._)("p",null,"在出口处导出 Component",-1),kn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" createElement "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./createElement'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" render "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./render'"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" Component "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'./Component'"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  createElement"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  render"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  Component"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br")])],-1),un=(0,t._)("p",null,"在 mountComponent中判断是类组件还是函数组件，通过其分别调用函数处理",-1),_n=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountComponent.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 区分函数型组件和类组件"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"isFunctionalComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 函数组件"),(0,t.Uk)("\n    nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"buildFunctionalComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 类组件"),(0,t.Uk)("\n    nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"buildStatefulComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 判断得到的 Virtual Dom 是否是组件"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"isFunction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountNativeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 处理类组件"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"buildClassComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 实例化class组件 传递props"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type")]),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 调用类组件中的render方法得到要渲染的 Virtual DOM"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" component"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 返回要渲染的 Virtual DOM"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" nextVirtualDOM\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"highlight-lines"},[(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br")]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br")])],-1),rn=(0,t._)("p",null,"创建 Component 父类，赋值 props 属性，这样子类也能拿到了",-1),Un=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Component"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"constructor"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" props\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br")])],-1),mn=(0,t._)("h2",{id:"vdom-对比更新",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#vdom-对比更新","aria-hidden":"true"},"#"),(0,t.Uk)(" VDOM 对比更新")],-1),bn=(0,t._)("p",null,"在新旧dom树的对比过程中，如何拿到旧的dom是第一个问题？其实在页面上已经有了真实的dom对象， 那么可以给真实的dom对象添加一个属性，这个属性就是旧的VDOM，这样就能很容易的拿到了",-1),dn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"createDomElelment"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 将 Virtual DOM 挂载到真实 DOM 对象的属性中 方便在对比时获取其 Virtual DOM"),(0,t.Uk)("\n  newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("_virtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM\n  "),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br")])],-1),vn=(0,t._)("p",null,[(0,t.Uk)("然后在render函数中拿到oldDOM, 为什么是 container.firstChild, 因为每一个组件都有一个父亲节点， 出口就是"),(0,t._)("code",null,'<div id="app"></div>'),(0,t.Uk)("，它也是一个父亲节点，所以其第一个元素就是"),(0,t._)("code",null,"oldDOM")],-1),fn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n  virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 拿到第一个元素"),(0,t.Uk)("\n  oldDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("firstChild\n"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br")])],-1),yn=(0,t._)("h3",{id:"vdom-是相同类型",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#vdom-是相同类型","aria-hidden":"true"},"#"),(0,t.Uk)(" vdom 是相同类型")],-1),wn=(0,t._)("p",null,"判断 oldVirtualDOM 是否存在， 如果存在则继续判断要对比的 Virtual DOM 类型是否相同， 如果类型相同判断节点类型是否是文本，如果是文本节点对比，就调用 updateTextNode 方法；如果是元素节点就调用 updateNodeElement，这个方法其实就是更新元素的方法",-1),gn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 获取未更新前的 Virtual DOM"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" oldVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldDOM "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("_virtualDOM\n  "),(0,t._)("span",{class:"token comment"},"// 判断oldDOM 是否存在"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"mountElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 存在oldVdom，且两者类型相同"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldVirtualDOM "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'text'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 更新内容 找到差异更新到真实dom oldDOM"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"updateTextNode"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 更新元素属性"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"updateNodeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 循环子元素，将子元素进行更新"),(0,t.Uk)("\n    virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" i")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br")])],-1),hn=(0,t._)("p",null,"updateTextNode 方法用于对比文本节点内容是否发生变化，如果发生变化则更新真实 DOM 对象中的内容，既然真实 DOM 对象发生了变化，还要将最新的 Virtual DOM 同步给真实 DOM 对象。",-1),Mn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"updateTextNode"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 如果两者文本节点不相等"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("textContent "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("textContent"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 将虚拟dom的文本内容复制给真实dom"),(0,t.Uk)("\n    oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("textContent "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("textContent\n    "),(0,t._)("span",{class:"token comment"},"// 同步真实dom对应的vdom"),(0,t.Uk)("\n    oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("_virtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br")])],-1),Dn=(0,t._)("p",null,"updateNodeElement 用于设置/更新元素节点属性 思路是",-1),On=(0,t._)("ol",null,[(0,t._)("li",null,[(0,t._)("p",null,"先分别获取更新后的和更新前的 Virtual DOM 中的 props 属性，循环新 Virtual DOM 中的 props 属性，通过对比看一下新 Virtual DOM 中的属性值是否发生了变化，如果发生变化 需要将变化的值更新到真实 DOM 对象中")]),(0,t._)("li",null,[(0,t._)("p",null,"再循环未更新前的 Virtual DOM 对象，通过对比看看新的 Virtual DOM 中是否有被删除的属性，如果存在删除的属性 需要将 DOM 对象中对应的属性也删除掉")])],-1),An=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"updateNodeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("newElment"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  oldVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"//  获取节点对应的属性对象"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 从新props中判断属性被添加的情况"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" newProps "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" oldProps "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// 首次渲染没有oldVirtaulDOM"),(0,t.Uk)("\n  Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"keys"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"propName"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 获取属性值"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" newPropsValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" newProps"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" oldPropsValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldProps"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newPropsValue "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(" oldPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 判断属性是否是事件属性 onClick -> click"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'on'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// 事件名称"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" eventName "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toLocaleLowerCase"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// 为元素添加事件"),(0,t.Uk)("\n        newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"addEventListener"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("eventName"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" newPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// 删除原有的事件的事件处理函数 同名"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"removeEventListener"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("eventName"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'value'"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(" propName "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'checked'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        newElment"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" newPropsValue\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'children'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'className'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"setAttribute"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'class'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" newPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"setAttribute"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" newPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token comment"},"// 从oldProps中 判断属性被删除的情况"),(0,t.Uk)("\n  Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"keys"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"propName"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" newPropsValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" newProps"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" oldPropsValue "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldProps"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("newPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 属性被删除了"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'on'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" eventName "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toLocaleLowerCase"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"removeEventListener"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("eventName"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldPropsValue"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'children'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        newElment"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"removeAttribute"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"33"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"34"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"35"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"36"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"37"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"38"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"39"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"40"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"41"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"42"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"43"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"44"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"45"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"46"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"47"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"48"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"49"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"50"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"51"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"52"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"53"),(0,t._)("br")])],-1),jn=(0,t._)("p",null,"节点更新使用的是深度优先的遍历顺序",-1),En=(0,t._)("p",null,[(0,t._)("img",{src:o,alt:"遍历顺序"})],-1),Cn=(0,t._)("h3",{id:"vdom是不同类型",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#vdom是不同类型","aria-hidden":"true"},"#"),(0,t.Uk)(" vdom是不同类型")],-1),xn=(0,t._)("p",null,"当对比的元素节点类型不同时，就不需要继续对比了，直接使用新的 Virtual DOM 创建 DOM 对象，用新的 DOM 对象直接替换旧的 DOM 对象。当前这种情况要将组件刨除，组件要被单独处理。",-1),Nn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// diff.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 如果 Virtual DOM 类型不一样"),(0,t.Uk)("\n  virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 并且 Virtual DOM 不是组件 因为组件要单独进行处理"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"typeof"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"function"'),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 根据 Virtual DOM 创建真实 DOM 元素"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" newDOMElement "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"createDOMElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 用创建出来的真实 DOM 元素 替换旧的 DOM 元素"),(0,t.Uk)("\n  oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("parentNode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"replaceChild"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newDOMElement"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" \n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br")])],-1),Vn=(0,t._)("h3",{id:"删除节点",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#删除节点","aria-hidden":"true"},"#"),(0,t.Uk)(" 删除节点")],-1),zn=(0,t._)("p",null,"删除节点发生在节点更新以后并且发生在同一个父节点下的所有子节点身上。",-1),Zn=(0,t._)("p",null,"在节点更新完成以后，如果旧节点对象的数量多于新 VirtualDOM 节点的数量，就说明有节点需要被删除。",-1),Pn=(0,t._)("p",null,[(0,t._)("img",{src:p,alt:"删除"})],-1),Qn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 判断oldDOM 是否存在"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"typeof"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    type "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'function'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldVirtualDOM "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 删除节点"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 获取旧节点"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" oldChildNodes "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes\n    "),(0,t._)("span",{class:"token comment"},"// 判断旧节点的数量"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldChildNodes "),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)(" length "),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 有节点需要被删除"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldChildNodes"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length "),(0,t._)("span",{class:"token operator"},"-"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n        i "),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length "),(0,t._)("span",{class:"token operator"},"-"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n        i"),(0,t._)("span",{class:"token operator"},"--"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token function"},"unmountNode"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldChildNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"unmountNode"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"node"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  node"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"remove"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"highlight-lines"},[(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("div",{class:"highlight-line"}," "),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br"),(0,t._)("br")]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br")])],-1),In=(0,t._)("h3",{id:"类组件状态更新",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#类组件状态更新","aria-hidden":"true"},"#"),(0,t.Uk)(" 类组件状态更新")],-1),Bn=(0,t._)("p",null,"实现以下代码的功能，",-1),Sn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// index.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Alert"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t.Uk)("TinyReact"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"constructor"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"super"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      title"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"default title"'),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 更改 handleChange 方法中的 this 指向 让 this 指向类实例对象"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("handleChange "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"handleChange"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"bind"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"handleChange"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 调用父类中的 setState 方法更改状态"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"setState"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      title"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"changed title"'),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("h2"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("title"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("h2"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t._)("span",{class:"token operator"},">"),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("message"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("handleChange"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("change title"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br")])],-1),Tn=(0,t._)("p",null,"setState 方法定义在父类中，该方法就是合并原有的state，产生新的state",-1),Rn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// Component.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Component"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"constructor"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" props\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"setState"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// setState 方法被子类调用 此处this指向子类实例对象"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 所以改变的是子类的 state 对象"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"assign"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br")])],-1),Kn=(0,t._)("p",null,"现在子类可以调用父类的setState方法更改状态，当组件的state状态发生改变时，要调用render方法更新视图 在组件更新之时，我们需要比对新旧vdom 找出要更新的部分，这里this指向的是子类，所以调用render 就能获得 vdom",-1),Wn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// Component.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"setState"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// setState 方法被子类调用 此处this指向子类"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 所以改变的是子类的 state"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"assign"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 通过调用 render 方法获取最新的 Virtual DOM"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" virtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br")])],-1),Fn=(0,t._)("p",null,"在父类Component设置两个函数用来存储dom和获取dom，",-1),Gn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// Component.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 保存 DOM 对象的方法"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"setDOM"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"dom"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("_dom "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" dom\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 获取 DOM 对象的方法"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token function"},"getDOM"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("_dom\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br")])],-1),Xn=(0,t._)("p",null,[(0,t.Uk)("接下来我们要研究如何调用到setDOM方法，首先我们必须要具有实例，有实例才能调用方法，在"),(0,t._)("code",null,"buildClassComponent"),(0,t.Uk)("方法 中我们初始化了实例，并返回给了"),(0,t._)("code",null,"nextVirtualDOM"),(0,t.Uk)(", 它又被传入了"),(0,t._)("code",null,"mountNativeElment"),(0,t.Uk)("， 在这里我们拿到了真实dom，从前面我们知道， 在真实dom中我们把虚拟dom赋值给了"),(0,t._)("code",null,"newElement"),(0,t.Uk)(",综上所述")],-1),Jn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountComponent.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"buildClassComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 实例化class组件 传递props"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type")]),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 拿到render函数"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" component"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 将实例赋值给nextvirtualdom"),(0,t.Uk)("\n  nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" component\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" nextVirtualDOM\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br")])],-1),qn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountNativeElment.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountNativeElment"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" newElment "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"createDomElelment"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 将转换之后的对象，放置到页面中·"),(0,t.Uk)("\n  container"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"appendChild"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newElment"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token comment"},"// 获取实例对象"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component\n  "),(0,t._)("span",{class:"token comment"},"// 类组件存在"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("component"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    component"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"setDOM"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newElment"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br")])],-1),Hn=(0,t._)("p",null,"现在更新前的 Virtual DOM 对象和更新后的 Virtual DOM 对象就都已经获取到了，接下来还要获取到真实 DOM 对象父级容器对象，最后调用diff就行了",-1),Ln=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t.Uk)("  "),(0,t._)("span",{class:"token function"},"setState"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"assign"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 获取最新的要渲染的 virtualDOM 对象"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" virtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 获取旧的 virtualDOM对象，进行比对"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" oldDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getDOM"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 获取容器"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" container "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("parentNode\n    "),(0,t._)("span",{class:"token comment"},"// 实现对比"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br")])],-1),Yn=(0,t._)("h3",{id:"组件更新",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#组件更新","aria-hidden":"true"},"#"),(0,t.Uk)(" 组件更新")],-1),$n=(0,t._)("p",null,"在 diff 方法中判断需要更新的 vdom 是不是组件，需要分多钟情况，新增 diffComponent 进行处理",-1),ns=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// diff.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 旧的组件的实例对象"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" oldComponent "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldVirtualDOM "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component\n"),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"typeof"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"function"'),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 要更新的是组件"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 1) 组件本身的 virtualDOM 对象 通过它可以获取到组件最新的 props"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 2) 要更新的组件的实例对象 通过它可以调用组件的生命周期函数 可以更新组件的 props 属性 可以获取到组件返回的最新的 Virtual DOM"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 3) 要更新的 DOM 象 在更新组件时 需要在已有DOM对象的身上进行修改 实现DOM最小化操作 获取旧的 Virtual DOM 对象"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 4) 如果要更新的组件和旧组件不是同一个组件 要直接将组件返回的 Virtual DOM 显示在页面中 此时需要 container 做为父级容器"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"diffComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldComponent"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br")])],-1),ss=(0,t._)("h4",{id:"不是同一个组件",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#不是同一个组件","aria-hidden":"true"},"#"),(0,t.Uk)(" 不是同一个组件")],-1),as=(0,t._)("p",null,"在 diffComponent 方法中判断需要更新的组件是不是同一个组件",-1),ts=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// diffComponent.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"diffComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldComponent"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 判断要更新的组件和未更新的组件是否是同一个组件 只需要确定两者使用的是否是同一个构造函数就可以了"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"isSameComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldComponent"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 属同一个组件 做组件更新  "),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 不是同一个组件 直接将组件内容显示在页面中"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// virtualDOM.type 更新后的组件构造函数"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// oldComponent.constructor 未更新前的组件构造函数"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 两者等价就表示是同一组件"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"isSameComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldComponent")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" oldComponent "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(" oldComponent"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("constructor\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br")])],-1),es=(0,t._)("p",null,"如果不是同一个组件，则只需要将组件显示到页面，并且删除原有的dom就行",-1),os=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// diffComponent.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 不是同一个组件 直接将组件内容显示在页面中"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 这里为 mountElement 方法新增了一个参数 oldDOM "),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 作用是在将 DOM 对象插入到页面前 将页面中已存在的 DOM 对象删除 否则无论是旧DOM对象还是新DOM对象都会显示在页面中"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"mountElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br")])],-1),ps=(0,t._)("p",null,"在 mountNativeElement 方法中删除原有的dom对象",-1),cs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountNavtiveElement.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountNativeElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n "),(0,t._)("span",{class:"token comment"},"// 如果旧的DOM对象存在 删除"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"unmount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"unmount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"node"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  node"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"remove"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br")])],-1),ls=(0,t._)("h4",{id:"是同一个组件",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#是同一个组件","aria-hidden":"true"},"#"),(0,t.Uk)(" 是同一个组件")],-1),ks=(0,t._)("p",null,"如果是同一个组件的话，需要执行组件更新操作，需要调用组件生命周期函数",-1),us=(0,t._)("p",null,"先在 Component 类中添加生命周期函数，子类要使用的话直接覆盖就可以",-1),_s=(0,t._)("p",null,"并添加 updateProps 方法 用于更新props",-1),rs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// Component.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Component"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"updateProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" props\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 生命周期函数"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"componentWillMount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"componentDidMount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"componentWillReceiveProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"nextProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"shouldComponentUpdate"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("nextProps"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" nextState")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" nextProps "),(0,t._)("span",{class:"token operator"},"!="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(" nextState "),(0,t._)("span",{class:"token operator"},"!="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("state\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"componentWillUpdate"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("nextProps"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" nextState")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"componentDidUpdate"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("prevProps"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" preState")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"componentWillUnmount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br")])],-1),is=(0,t._)("p",null,"新建 updateComponent 方法用于更新组件的操作",-1),Us=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// diffComponent.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"isSameComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldComponent"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 属同一个组件 做组件更新"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"updateComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldComponent"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br")])],-1),ms=(0,t._)("p",null,"在 updateComponent 方法中调用组件的生命周期函数，更新组件获取最新 Virtual DOM，最终调用 diff 方法进行更新",-1),bs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"import"),(0,t.Uk)(" diff "),(0,t._)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"./diff"'),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"updateComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  oldComponent"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  oldDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  container")]),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 生命周期函数"),(0,t.Uk)("\n  oldComponent"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"componentWillReceiveProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 调用 shouldComponentUpdate 生命周期函数判断是否要执行更新操作"),(0,t.Uk)("\n    oldComponent"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"shouldComponentUpdate"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 将未更新的 props 保存一份"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" prevProps "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldComponent"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props\n    "),(0,t._)("span",{class:"token comment"},"// 生命周期函数"),(0,t.Uk)("\n    oldComponent"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"componentWillUpdate"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 更新组件的 props 属性"),(0,t.Uk)("\n    oldComponent"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"updateProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 因为组件的 props 已经更新 所以调用 render 方法获取最新的 Virtual DOM"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldComponent"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 进行一系列操作后 将组件实例对象挂载到 Virtual DOM 身上"),(0,t.Uk)("\n    nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldComponent\n    "),(0,t._)("span",{class:"token comment"},"// 调用diff方法更新视图"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 生命周期函数"),(0,t.Uk)("\n    oldComponent"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"componentDidUpdate"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("prevProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br")])],-1),ds=(0,t._)("h2",{id:"ref-属性",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#ref-属性","aria-hidden":"true"},"#"),(0,t.Uk)(" ref 属性")],-1),vs=(0,t._)("p",null,"为节点添加 ref 属性可以获取到这个节点的 DOM 对象，比如在 DemoRef 类中，为 input 元素添加了 ref 属性，目的是获取 input DOM 元素对象，在点击按钮时获取用户在文本框中输入的内容",-1),fs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// index.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"DemoRef"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t.Uk)("TinyReact"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"handle"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" value "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("input"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("value\n    console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("value"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("input type"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token string"},'"text"'),(0,t.Uk)(" ref"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token parameter"},"input"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("input "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" input"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"/"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"handle"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"bind"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("按钮"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br")])],-1),ys=(0,t._)("p",null,"实现思路是在创建节点时判断其 Virtual DOM 对象中是否有 ref 属性，如果有就调用 ref 属性中所存储的方法并且将创建出来的DOM对象作为参数传递给 ref 方法， 这样在渲染组件节点的时候就可以拿到元素对象并将元素对象存储为组件属性了。",-1),ws=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// createDOMElement.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("ref"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"ref"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newElement"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br")])],-1),gs=(0,t._)("p",null,"在类组件的身上也可以添加 ref 属性，目的是获取组件的实例对象，比如下列代码中，在 DemoRef 组件中渲染了 Alert 组件，在 Alert 组件中添加了 ref 属性， 目的是在 DemoRef 组件中获取 Alert 组件实例对象。",-1),hs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"DemoRef"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t.Uk)("TinyReact"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"handle"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" value "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("input"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("value\n    console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("value"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("alert"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"componentDidMount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},'"componentDidMount"'),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("input type"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token string"},'"text"'),(0,t.Uk)(" ref"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token parameter"},"input"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("input "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" input"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"/"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"handle"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"bind"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("按钮"),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)("Alert ref"),(0,t._)("span",{class:"token operator"},"="),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token parameter"},"alert"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("alert "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" alert"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"/"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token operator"},"<"),(0,t._)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br")])],-1),Ms=(0,t._)("p",null,"实现思路是在 mountComponent 方法中，如果判断了当前处理的是类组件，就通过类组件返回的 Virtual DOM 对象中获取组件实例对象， 判断组件实例对象中的 props 属性中是否存在 ref 属性，如果存在就调用 ref 方法并且将组件实例对象传递给 ref 方法。",-1),Ds=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountComponent.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"isFunctionalComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\t"),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 类组件"),(0,t.Uk)("\n    nextVirtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"buildStatefulComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 获取组件实例对象"),(0,t.Uk)("\n    component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" nextVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\t"),(0,t._)("span",{class:"token comment"},"// 如果组件实例对象存在的话"),(0,t.Uk)("\n\t"),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("component"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 组件完成挂载的生命周期函数"),(0,t.Uk)("\n      component"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"componentDidMount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n   \t"),(0,t._)("span",{class:"token comment"},"// 判断组件实例对象身上是否有 props 属性 props 属性中是否有 ref 属性"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("component"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" component"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("ref"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 调用 ref 方法并传递组件实例对象"),(0,t.Uk)("\n      component"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"ref"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("component"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br")])],-1),Os=(0,t._)("h2",{id:"key-属性",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#key-属性","aria-hidden":"true"},"#"),(0,t.Uk)(" key 属性")],-1),As=(0,t._)("p",null,"在 React 中，一般会给循环渲染添加 key 属性，key属性帮助 React 快速更新数据和删除数据，从而达到 DOM 操作最小化的目的",-1),js=(0,t._)("h3",{id:"key-属性节点对比",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#key-属性节点对比","aria-hidden":"true"},"#"),(0,t.Uk)(" key 属性节点对比")],-1),Es=(0,t._)("p",null,"在两个元素进行对比时， 循环旧 dom 对象的子元素，将有key属性的族元素存储到一个对象中，借着循环新的vdom对象的子元素，在循环中获取这个子元素的key属性， 然后用这个key属性找到对应 对象中的 是否有这个元素，如果能找到 说明已存在，不需要渲染；如果找不到，说明需要新增",-1),Cs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// diff.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldVirtualDOM "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(" oldVirtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 将拥有key属性的元素放入 keyedElements 对象中"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" keyedElements "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" len "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)(" len"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i"),(0,t._)("span",{class:"token operator"},"++"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" domElement "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("domElement"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("nodeType "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" domElement"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getAttribute"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},'"key"'),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        keyedElements"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" domElement\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br")])],-1),xs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// diff.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token comment"},"// 看一看是否有找到了拥有 key 属性的元素"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" hasNoKey "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"keys"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("keyedElements"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token comment"},"// 如果没有找到拥有 key 属性的元素 就按照索引进行比较"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("hasNoKey"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 没有 递归对比 Virtual DOM 的子元素"),(0,t.Uk)("\n  virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" i")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"diff"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 使用key属性进行元素比较"),(0,t.Uk)("\n  virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" i")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 获取要进行比对的元素的 key 属性"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" child"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("key\n    "),(0,t._)("span",{class:"token comment"},"// 如果 key 属性存在"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 到已存在的 DOM 元素对象中查找对应的 DOM 元素"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" domElement "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" keyedElements"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token comment"},"// 如果找到元素就说明该元素已经存在 不需要重新渲染"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("domElement"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// 虽然 DOM 元素不需要重新渲染 但是不能确定元素的位置就一定没有发生变化"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// 所以还要查看一下元素的位置"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// 看一下 oldDOM 对应的(i)子元素和 domElement 是否是同一个元素 如果不是就说明元素位置发生了变化"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(" domElement"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token comment"},"// 元素位置发生了变化"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token comment"},"// 将 domElement 插入到当前元素位置的前面 oldDOM.childNodes[i] 就是当前位置"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token comment"},"// domElement 就被放入了当前位置"),(0,t.Uk)("\n          oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"insertBefore"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("domElement"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// 新增元素"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token function"},"mountElement"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("child"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"33"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"34"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"35"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"36"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"37"),(0,t._)("br")])],-1),Ns=(0,t._)("p",null,"这里新增元素不是所有的都放到最后的，根据最后一个元素是否存在，判断是否是插入",-1),Vs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// mountNativeElement.js"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  container"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"insertBefore"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newElement"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 将转换之后的DOM对象放置在页面中"),(0,t.Uk)("\n  container"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"appendChild"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newElement"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br")])],-1),zs=(0,t._)("h3",{id:"节点卸载",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#节点卸载","aria-hidden":"true"},"#"),(0,t.Uk)(" 节点卸载")],-1),Zs=(0,t._)("p",null,"在比对节点的过程中，如果旧节点的数量多于要渲染的新节点的数量就说明有节点被删除了， 继续判断 keyedElements 对象中是否有元素，如果没有就使用索引方式删除，如果有就要使用 key 属性比对的方式进行删除。",-1),Ps=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// 删除节点"),(0,t.Uk)("\n "),(0,t._)("span",{class:"token comment"},"// 获取旧节点"),(0,t.Uk)("\n "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" oldChildNodes "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes\n "),(0,t._)("span",{class:"token comment"},"// 如果旧节点的数量多于要渲染的新节点的长度"),(0,t.Uk)("\n "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldChildNodes"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length "),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n   "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("hasNoKey"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n     "),(0,t._)("span",{class:"token comment"},"// 是否有key， 没有 普通删除"),(0,t.Uk)("\n     "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldChildNodes"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length "),(0,t._)("span",{class:"token operator"},"-"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n       i "),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length "),(0,t._)("span",{class:"token operator"},"-"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n       i"),(0,t._)("span",{class:"token operator"},"--"),(0,t.Uk)("\n     "),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token function"},"unmountNode"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldChildNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n     "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n   "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n     "),(0,t._)("span",{class:"token comment"},"// 通过key属性删除节点"),(0,t.Uk)("\n     "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)(" oldChildNodes"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i"),(0,t._)("span",{class:"token operator"},"++"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" oldChild "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldChildNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" oldChildKey "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" oldChild"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("_virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("key\n       "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" found "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" n "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" n "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" n"),(0,t._)("span",{class:"token operator"},"++"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n         "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldChildKey "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("n"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n           found "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n           "),(0,t._)("span",{class:"token keyword"},"break"),(0,t.Uk)("\n         "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("found"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n         "),(0,t._)("span",{class:"token function"},"unmountNode"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("oldChild"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n       "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n     "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n   "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br")])],-1),Qs=(0,t._)("p",null,"卸载节点并不是说将节点直接删除就可以了，还需要考虑以下几种情况",-1),Is=(0,t._)("ol",null,[(0,t._)("li",null,"如果要删除的节点是文本节点的话可以直接删除"),(0,t._)("li",null,"如果要删除的节点由组件生成，需要调用组件卸载生命周期函数"),(0,t._)("li",null,"如果要删除的节点中包含了其他组件生成的节点，需要调用其他组件的卸载生命周期函数"),(0,t._)("li",null,"如果要删除的节点身上有 ref 属性，还需要删除通过 ref 属性传递给组件的 DOM 节点对象"),(0,t._)("li",null,"如果要删除的节点身上有事件，需要删除事件对应的事件处理函数")],-1),Bs=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"unmount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"dom"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 获取节点对应的 virtualDOM 对象"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" virtualDOM "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" dom"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("_virtualDOM\n  "),(0,t._)("span",{class:"token comment"},"// 如果要删除的节点时文本"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"text"'),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 直接删除节点"),(0,t.Uk)("\n    dom"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"remove"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 阻止程序向下运行"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token comment"},"// 查看节点是否由组件生成"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component\n  "),(0,t._)("span",{class:"token comment"},"// 如果由组件生成"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("component"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// 调用组件卸载生命周期函数"),(0,t.Uk)("\n    component"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"componentWillUnmount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  \n  "),(0,t._)("span",{class:"token comment"},"// 如果节点具有 ref 属性 通过再次调用 ref 方法 将传递给组件的DOM对象删除"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("ref"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"ref"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token comment"},"// 事件处理"),(0,t.Uk)("\n  Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"keys"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"propName"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},'"on"'),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" eventName "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propName"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toLowerCase"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" eventHandler "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" virtualDOM"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("propName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      dom"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"removeEventListener"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("eventName"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" eventHandler"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\t\n  "),(0,t._)("span",{class:"token comment"},"// 递归删除子节点"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("dom"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length "),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)(" dom"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i"),(0,t._)("span",{class:"token operator"},"++"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"unmount"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("dom"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("childNodes"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      i"),(0,t._)("span",{class:"token operator"},"--"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  \t\n  dom"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"remove"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"33"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"34"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"35"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"36"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"37"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"38"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"39"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"40"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"41"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"42"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"43"),(0,t._)("br")])],-1),Ss={},Ts=(0,a(3744).Z)(Ss,[["render",function(n,s){const a=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.iD)(t.HY,null,[c,(0,t._)("p",null,[l,k,u,(0,t._)("a",_,[r,(0,t.Wm)(a)]),i,U,m,b,d,v]),f,y,w,g,h,M,D,O,A,j,E,C,x,N,V,z,Z,P,Q,I,B,S,T,R,K,W,F,G,X,J,q,H,L,Y,$,nn,sn,an,tn,en,on,pn,cn,ln,kn,un,_n,rn,Un,mn,bn,dn,vn,fn,yn,wn,gn,hn,Mn,Dn,On,An,jn,En,Cn,xn,Nn,Vn,zn,Zn,Pn,Qn,In,Bn,Sn,Tn,Rn,Kn,Wn,Fn,Gn,Xn,Jn,qn,Hn,Ln,Yn,$n,ns,ss,as,ts,es,os,ps,cs,ls,ks,us,_s,rs,is,Us,ms,bs,ds,vs,fs,ys,ws,gs,hs,Ms,Ds,Os,As,js,Es,Cs,xs,Ns,Vs,zs,Zs,Ps,Qs,Is,Bs],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}},2993:(n,s,a)=>{n.exports=a.p+"assets/img/1.7fd43681.png"},4643:n=>{n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATMAAACsCAYAAAAXH0t8AAAUtElEQVR4Xu2dd4wVVRuH3wVUQDqhCMQYWhDpCZGIoIggvUiXJiWEHppA6AiIdEKvUkUEpHcUCUVAQdSAkaYxQZpECAQJQdgv70nmfnd37969d5k77Jz7nIQ/nD0zZ97n/e3vnDllTUhMTEwUCgQgAAGfE0jAzHyeQV4fAhAwBDAzhAABCFhBADOzIo0EAQEIYGZoAAIQsIIAZmZFGgkCAhDAzNAABCBgBQHMzIo0EgQEIICZoQEIQMAKApiZFWkkCAhAADNDAxCAgBUEMDMr0mh3ENevX5ebN29KhQoVQgZ6//59yZo1q2TOnDnw8xs3boj+S+0eu4nFZ3SYWXzm/ZlGvXDhQundu7ds375dGjduHPZdHjx4IJUqVZIaNWrIsmXLUtRdu3atdOzYUfbs2SP16tUL/PzMmTNSpUoV2bFjhzRq1OiZxkvj3hDAzLzhTCtBBObPny99+/aVbdu2SZMmTcKyGTx4sCxdulQuXbokBQsWTFJ38+bN0qJFC3MtuZnptX79+smqVavk8uXLUqBAAXJgOQHMzPIEZ8TwIjUzNbBSpUrJxIkTZeTIkYFQzp49K4MGDZIDBw4EroUyM/00LVSokKghTp8+PSOi4J1cJICZuQgz3h+1ZcsWmTFjhkyZMkWqV68ewLFp0yaZPXu2MZRq1apJpGbWvXt3Wb58uVy8eFFKliwZeJ5zXQ0tb968Mnr06JAjM71BR376qanzbmpsFHsJYGb25tbzyFIzqblz50r//v1l586d0rBhw4jNLFeuXGZkdvr06SSx6Ofpa6+9Zgxu1qxZZpQWamSmNzlzauvXr5c2bdp4zoQGvSOAmXnH2vqW3DQzXYksXLiw9OrVSxYsWJAqu5kzZ5rPyNTMTD9Jy5cvL+PGjZOxY8dan4N4DhAzi+fsuxy7m2Z25MgRqVmzpkyaNElGjBiRbjO7ffu25MuXT1q1aiUbNmxwOWIel5EIYGYZKRs+fxc3zUxXMHv06CGrV682Wy9SK2mNzPS+hIQEKV26tJw/f97nhHn9cAQwM/ThGgHHzLZu3SpNmzYNPHfq1KkybNiwqObMdCFhyJAhsmbNGunQoUO6zUz/FxeZMmUy2zr005ViLwHMzN7ceh7Z4sWLpWfPnuZzTj/rnKLzXosWLYrKzJyJ+zFjxsj48ePTbWbXrl2TIkWKmA20yRcSPAdEgzElgJnFFG98PVxXDNu1a2c2q86ZM8cEf+vWLalcubJcuXIlKjM7ePCg1K5dO825rrQ+M48ePWpOD+hIUUeMFHsJYGb25tbzyP766y8pVqyYaVd3+OuIaOXKlXLhwgVzLZqtGXreMkeOHFK2bFk5d+5cukdmK1askK5du8q8efOkT58+njOhQe8IYGbesY6LljZu3CjdunWTe/fumXh186xucu3SpYvs3r1b6tevL5GezdQzlbt27TKju/z584fkp5txBw4cKPv27ZO6deumqKOLCLqYkHzjbVwkI86CxMziLOFehPvkyRP5448/zO583RaR3nLo0CGpVauWTJgwQUaNGhX1Y5z5subNm4ue46TYTQAzszu/vo+uZcuWsn//fnMcKXv27FHFo4sHaoR6xrNEiRJR3Utl/xHAzPyXs7h6Y/2LF3psSU8B6KpopOXu3btm/k7nySZPnhzpbdTzMQHMzMfJi5dX1wPqugigk/mRFj3epOc2dQ4vd+7ckd5GPR8TwMx8nDxeHQIQ+D8BzAw1QAACVhDAzKxII0FAAAKYGRqAAASsIICZWZFGgoAABDAzNAABCFhBADOzIo0EAQEIYGZoAAIQsIIAZmZFGgkCAhDAzNAABCBgBQHMzIo0EgQEIICZoQEIQMAKApiZFWkkCAhAADNDAxCAgBUEMDMr0kgQEIAAZoYGIAABKwhgZlakkSAgAAHMDA1AAAJWEMDMrEgjQUAAApgZGoAABKwggJlZkUaCgAAEMDM0AAEIWEEAM7MijQQBAQhgZmgAAhCwggBmZkUaCQICEMDM0AAEIGAFAczMijQSBAQggJmhAQhAwAoCmJkVaSQICEAAM0MDEICAFQQwMyvSSBAQgABmhgYgAAErCGBmVqSRICAAAcwMDUAAAlYQwMysSCNBQAACmBkagAAErCCAmVmRRoKAAAQwMzQAAQhYQQAzsyKNBAEBCGBmaAACELCCAGZmRRoJAgIQwMzQAAQgYAUBzMyKNBIEBCCAmXmogevXr8vNmzelQoUKKVp9+PChvPDCCymu37hxQ/RfqHs8fHWa8imBcJpLLSS/ag4zi0KkCxculN69e8v27dulcePGsnr1auncubN88cUX0rZt27BPevDggVSqVElq1Kghy5YtM3WvXLkiY8eOlZ07dxqTK1iwoDRo0EA++eQTeemll0ydM2fOSJUqVWTHjh3SqFGjKN6WqjYQcFtzqt3x48eHRLNo0SKpWrWqbzWHmUWh+Pnz50vfvn1l27Zt0qRJE9m0aZMMHDhQFixYYMwtXBk8eLAsXbpULl26ZExLe0wVjhpanTp1jMkdOXJEDhw4IMWKFZPTp0+belr69esnq1atksuXL0uBAgWieGOq+p2Am5pTFqrDmTNnSrVq1SRr1qxJ8MyYMcN0nH7VHGYWhdqTCyvSW9XASpUqJRMnTpSRI0ea2yZMmCBjxoyR4cOHy+TJkwOPUnOcPXu2TJ06VT766CNzXUdthQoVMkKcPn16pM1SzwICbmpOcdSsWdN0mo8ePZIsWbKkSsiPmsPMohB8cmHt2bNHJk2aJOPGjZN333031Sd1795dli9fLhcvXpSSJUuaekuWLJFvv/3WmJpzTa9v3rxZWrRoYUZjc+bMCTxTR4L6qakjOjU2SnwQcFNzjx8/NgamXwGHDx9OE6DfNIeZpZnS/1dILqyVK1dKly5d0pwzy5UrlxmZ6adjWqV169ayceNG80mqJuiUtWvXSseOHWX9+vXSpk2btB7Dzy0h4Kbmzp8/L2XKlDGfktohHj161MzN6hSJdsg5cuRIQs1vmsPMohB9eoSlK0OFCxeWXr16mbm1cOWbb74xIzydK1Ph5cmTJ1D97NmzUr58eSM6XTSgxAcBNzX35ZdfBhaqVGMVK1aUEydOyL1796Rs2bJy6tQpyZYtm281h5lF8TuRHmHp/ITOU+jn6IgRI1Jt7bvvvpPq1aubn+/evVvq16+fpO7t27clX7580qpVK9mwYUMUb01VPxNwU3M62h81apR06NBBpk2bJpkyZZI7d+5I3bp15YcffpBPP/1Uhg0bFsDlN81hZlEoPT3CUgH16NHDbOPQz8RQRefCdH5Ciw7t27dvH7JeQkKClC5d2ozaKPFBIFaaC6a3Zs0a6dSpk1lV379/fxKwftIcZhbF70R6hKXL3UOGDBEVjPaIyYvOgbVr185c1v1mDRs2DPlGiYmJpifVzwP9dKXEB4FYaC45uatXr0rRokWlePHiZvuPU/ymOcwsit+J9AjLmUTVbRjJNys6Cwg5c+Y0PaLu/UmtXLt2TYoUKWImbyNZSIgiLKpmYAJuak6nOY4fP24Wl4JX0HXfZLNmzeS9996TvXv3Bmj4TXOYWRRCTo+wDh48KLVr104x13Xu3DkpV66cqJGdPHlSXn311bBvoitPuqTetGlT2bp1axRvTVU/E3BTc/3795e5c+em2PbjrKDPmjVLBgwYEMDlN81hZlEoPT3Cun//vlny1tUiNTCn1KtXT/bt22fMLNSITFc1hw4dGqi/YsUK6dq1q8ybN0/69OkTxVtT1c8E3NScszVDeejxO11kUg2uW7fOzMXq0bns2bP7VnOYWRRKT+85OT1TuWvXLrl165bkz59fnM2L4ZrWM5/6GeoUXUTQz4PgjbdRvDpVfUrALc054R87dswsSP36668BIrpJW7WVN2/eJJT8pjnMzAORHzp0SGrVqmV2++vSeLTFmbto3ry5OSFAgUBaBNLSnB5X0s61RIkSIf9aix81h5mlpQqXft6yZUszya/HkYKH8pE8XhcP1Aj1jKeKjwKBSAjEm+Yws0hU4UIdXfLWFSQ9BaCnASItd+/eNX9FQ+fJgg+kR3o/9eKXQLxpDjPzUOv6Fy90EUAn8yMtephdV5n0vGbu3LkjvY16EDAE4klzmBmihwAErCCAmVmRRoKAAAQwMzQAAQhYQQAzsyKNBAEBCGBmaAACELCCAGZmRRoJAgIQwMzQAAQgYAUBzMyKNBIEBCCAmaEBCEDACgKYmRVpJAgIQAAzQwMQgIAVBDAzK9JIEBCAAGaGBiAAASsIYGZWpJEgIAABzAwNQAACVhDAzKxII0FAAAKYGRqAAASsIICZWZFGgoAABDAzNAABCFhBADOzIo0EAQEIYGZoAAIQsIIAZmZFGgkCAhDAzNAABCBgBQHMzIo0EgQEIICZoQEIQMAKApiZFWkkCAhAADNDAxCAgBUEMDMr0kgQEIAAZoYGIAABKwhgZlakkSAgAAHMDA1AAAJWEMDMrEgjQUAAApgZGoAABKwggJlZkUaCgAAEMDM0AAEIWEEAM7MijQQBAQhgZmgAAhCwggBmZkUaCQICEMDM0AAEIGAFAczMijQSBAQggJmhAQhAwAoCmJkVafRPENevX5ebN29KhQoVIn7pGzduiP6L5p6IH05FawhgZtakMuMH8uDBA6lUqZLUqFFDli1bluKFHz58KG+88Yb8+OOP8uTJE0lISDB1zpw5I1WqVJEdO3ZIo0aNMn6gvOEzIZAhzCxcb/3o0SN57rnnUsCht34menmqRgcPHixLly6VS5cuScGCBVM8a+jQoTJt2jRzPdjM9L/79esnq1atksuXL0uBAgWe6j242U4Cz9zMQvXWV69eleHDh8vWrVvl3r17Ur16dfnwww+le/fugSzQW/tLkGpgpUqVkokTJ8rIkSNTvPz+/fvlvffeC1xPbmb6aVqoUCFRQ5w+fbq/gudtPSHwzM0seW+dmJgob731lhw5ckRatWol5cqVk23btplPj9GjR8vHH38cAENv7YlGTCO7du2SyZMny7hx42TJkiWyd+9eY05NmzaV/v37S548ecK+jHZEy5cvl4sXL0rJkiWT1HXmw6pWrSp37tyRY8eOpRiZ6Q1NmjQxn5o6kldjo0AgmMAzNbNQvfXq1aulc+fOSXrgf//9VwoXLmxGaffv35fs2bObGOitvRPzZ599Jt26dTMN6idihw4d5KeffpKDBw9K8+bN5auvvgrMcYV6q1y5chnzO336dJIf6whMTerw4cNy/vx504GlZmZr166Vjh07yvr166VNmzbeBU9LviDwVGYWi95a50ROnTol77zzTpK5kTfffNOI/J9//pG8efMG4NJbe6Mzx8xy5swpv/32mxQpUkR0FN2lSxczl7VmzRpjcKGKjry0M+rVq5csWLAgSZW5c+eakd3GjRulZcuW4uQ5+Wem3nT27FkpX768GR2OHTvWm8BpxTcEnsrMYtVbB9O7du2a6GhN59Dq1KkjOrcSXOitvdGak+tJkybJiBEjAo3qaKpMmTLSs2dPWbhwYciX0SmDmjVrSvJ7f/75Z7O6qaMtzbGWcGZ2+/ZtyZcvnxm9bdiwwZvAacU3BFwxM7d7a4femDFjZMKECeY/S5cuLSdOnEgyKqO39k5njpnt3r1b6tevH2j4v//+M6vNOt/1/fffh3whXcHs0aOHMSw1Li06dVC5cmUzR6YjPWe0Hc7M9D7drqFaUBOlQCCYgCtm5mZvHfxyM2fONPMy+gmjRefS5s2bJzly5AhUo7f2RtCOmX399ddSu3btQKOPHz+WLFmymH1gyefDnEozZsyQIUOGJPkU1c/K1q1bBzoqp+6FCxcC13SqIXi0p5+1mTJlMnN2+ulKgYDrZuZWb51aanTiv0WLFnLgwAFZt26dtGvXLklVeuvYi9oxM50f69SpU6DBP//8U1555RUz8lq8eHHIF3GmAnSkPX78eFNnz549MmDAgBT1w5mZTjnoXF0444w9CVrIqARcGZm51VuHg6TbM5o1ayYffPCBfP7554Gq9NbeSMsxM/2cPH78uGTOnNk0rHOZU6ZMMZthg/cBBr+VrnjqaC6Sua5wn5lHjx41pwd0O4juQaRAwPWRmVu9tb7YoEGDzJ6mffv2mR7fKdqTN2jQQBo2bCg7d+4MXKe39kbQwYs9urm1ffv2Zg5TVyfffvttk6/nn38+5MvodhqdGihbtqycO3cu7AuHM7MVK1ZI165dzVRDnz59vAmcVnxDwJWRmZu9tZrZrFmzZODAgaJzZk55//33ZcuWLSlWxOitvdGaY2Zt27Y1nY1++mvRPWY6KsufP3/YF9EzlXrfrVu3wtbVVU9d/Qy1NUM/ZbWtUBtvvaFAKxmZgCtmpgG61Vv//vvvZrlef1l05ev1118X/UXSEwDFihUze41y584dYEpv7Y28HDPTDav6uah5Klq0qGTLli2iFzh06JDUqlXLrE6PGjUqonuCKzkjcDXPzZs3R30/N9hPwBUzc7u3PnnypJlQ/uWXXwIZ0HmSOXPmyMsvv5wkK/TW3og02MzSu/teN8XqPkE9juSc4oj07Z1tOnpqpESJEpHeRr04IuCKmcWqt1bR//3331K8eHF58cUXU6SF3to7pbphZnq6Q89l6jybngaItNy9e9eMynWeTM+HUiAQioBrZkZvbbfAdEOsnr/U1eSKFSumO1j9ixe6CKDTA5EWXfzReVTdmxY8xRDp/dSLDwLP3MzoreNDaEQJgVgTeCozo7eOdXp4PgQgECmBpzKzSBuhHgQgAIFYE8DMYk2Y50MAAp4QwMw8wUwjEIBArAlgZrEmzPMhAAFPCGBmnmCmEQhAINYEMLNYE+b5EICAJwQwM08w0wgEIBBrAphZrAnzfAhAwBMCmJknmGkEAhCINQHMLNaEeT4EIOAJAczME8w0AgEIxJoAZhZrwjwfAhDwhABm5glmGoEABGJNADOLNWGeDwEIeEIAM/MEM41AAAKxJoCZxZowz4cABDwhgJl5gplGIACBWBPAzGJNmOdDAAKeEMDMPMFMIxCAQKwJYGaxJszzIQABTwhgZp5gphEIQCDWBP4Hq3FBseHcM14AAAAASUVORK5CYII="},5647:(n,s,a)=>{n.exports=a.p+"assets/img/3.0fb12b4d.png"}}]);